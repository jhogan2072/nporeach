<%= form_for(@privilege, :html => {:class => "standard_form", :multipart => true}) do |f| %>
  <% if @privilege.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@privilege.errors.count, "error") %><%= t('.preventprivilegesave') %> </h2>

      <ul>
      <% @privilege.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <ul>
    <li class="form_header">
      <h2><%= t('.manageprivilegeinformation') %></h2>
    </li>
    <li>
      <%= f.label :name %>
      <%= f.text_field :name %>
    </li>
    <li>
      <%= f.label :description %>
      <%= f.text_area :description, cols: 30,rows: 3 %>
    </li>
    <li>
      <%= f.label t('.objectmanaged') %>
      <% controllers_array = Privilege::CONTROLLERS.map {|priv_controller| [priv_controller.first, priv_controller.last[1]] } %>
      <%= f.collection_select :controller, controllers_array, :first, :last, prompt: t('.objectmanaged') %>
    </li>
    <li>
      <%= f.label :operations %>
      <% Privilege::OPERATIONS.each_pair do |key, value| %>
        <%= check_box_tag 'allowed_operations[]', value, has_privilege(value, @privilege.operations), :class => "checkbox_group" %>
        <%= key %>
      <% end %>
      <%= hidden_field_tag 'allowed_operations[]','' %>
    </li>
    <li>
      <%= f.label :menu_text %>
      <%= f.text_field :menu_text %>
    </li>
    <li>
      <%= f.submit %>
    </li>
    <li class="bottom"></li>
  </ul>
<% end %>
